# demographics
demo <- read_csv('data/demographics.csv')
library(tidyverse)
# demographics
demo <- read_csv('data/demographics.csv')
vr_thick <- read_csv('data/vertexwise/thickness-vision-rois.csv')
vr_noddi <- read_csv('data/vertexwise/noddi-vision-rois.csv')
demo
demo %>% janitor::clean_names()
library(janitor)
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick)
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick) %>%
right_join(vr_noddi)
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick) %>%
right_join(vr_noddi, by = c('subject','vertex','hemi'))
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick, by = 'subject') %>%
right_join(vr_noddi, by = c('subject','vertex','hemi'))
summarize(across(c(ecc,norm_thick:odi), mean)
vr_comb <- demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick, by = 'subject') %>%
right_join(vr_noddi, by = c('subject','vertex','hemi')) %>%
group_by(subject,dx,onset,location) %>%
summarize(across(c(ecc,norm_thick:odi), mean, .names = '{.col}'))
vr_comb
test <- read_csv('/data/user/mdefende/Projects/prl-thickness/data/normthick_noddi_master_data.csv')
test
test %>%
clean_names()
test <- test %>%
clean_names() %>%
select(subject,dx,onset,location,ecc,m_thick,ficvf,odi) %>%
rename(norm_thick = m_thick)
test
all_equal(test,vr_comb)
left_join(vr_comb,test)
vr_comb <- vr_comb %>% ungroup()
left_join(vr_comb,test)
left_join(vr_comb,test,by = c(subject,dx,onset,location))
left_join(vr_comb,test,by = c('subject','dx','onset','location'))
left_join(vr_comb,test,by = c('subject','dx','onset','location')) %>%
mutate(ecc_d = ecc.x - ecc.y,
norm_thick_d = norm_thick.x - norm_thick.y,
ficvf_d = ficvf.x - ficvf.y,
odi_d = odi.x - odi.y) %>%
select(-ends_with(c('.x','.y'))) %>%
summarize(across(ends_with('_d'), .fns = list(mean,sd)))
left_join(vr_comb,test,by = c('subject','dx','onset','location')) %>%
mutate(ecc_d = ecc.x - ecc.y,
norm_thick_d = norm_thick.x - norm_thick.y,
ficvf_d = ficvf.x - ficvf.y,
odi_d = odi.x - odi.y) %>%
select(-ends_with(c('.x','.y'))) %>%
group_by(dx,onset,location) %>%
summarize(across(ends_with('_d'), .fns = list(mean,sd)))
vr_comb
vr_comb <- demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(vr_thick, by = 'subject') %>%
right_join(vr_noddi, by = c('subject','vertex','hemi')) %>%
group_by(subject,dx,onset,location) %>%
summarize(across(c(ecc,norm_thick:odi), mean, .names = '{.col}')) %>%
ungroup() %>%
mutate(across(subject:location, factor))
str(vr_comb)
save(vr_comb,file = 'data/vision_rois_master.RData')
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(f_thick, by = 'subject') %>%
right_join(f_noddi, by = c('subject','vertex','hemi'))
f_thick <- read_csv('data/vertexwise/thickness-full-V1.csv')
f_noddi <- read_csv('data/vertexwise/noddi-full-V1.csv')
demo %>%
clean_names() %>%
select(subject, dx, onset) %>%
right_join(f_thick, by = 'subject') %>%
right_join(f_noddi, by = c('subject','vertex','hemi'))
